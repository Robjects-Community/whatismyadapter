# WillowCMS Deployment Environment Configuration
# This file is the master template for all environment variables
# Copy to env/local.env or env/remote.env and set actual values
# NEVER commit actual secrets - only commit this .example file

# =============================================================================
# CORE APPLICATION (CakePHP 5.x)
# =============================================================================
APP_NAME=WillowCMS
APP_ENV=production
DEBUG=false
APP_ENCODING=UTF-8
APP_DEFAULT_LOCALE=en_US
APP_DEFAULT_TIMEZONE=America/Chicago
APP_FULL_BASE_URL=https://your-production-domain.com

# Security - MUST be set to random value for production
SECURITY_SALT=changeme-random-32-char-string

# Database Connection (CakePHP 5.x prefers DATABASE_URL)
DATABASE_URL=mysql://cms_user:password@mysql:3306/cms
# Alternatively, use individual DB vars:
DB_HOST=mysql
DB_PORT=3306
DB_USERNAME=cms_user
DB_PASSWORD=password
DB_DATABASE=cms

# Test Database
TEST_DATABASE_URL=mysql://cms_user:password@mysql:3306/cms_test
TEST_DB_HOST=mysql
TEST_DB_PORT=3306
TEST_DB_USERNAME=cms_user
TEST_DB_PASSWORD=password
TEST_DB_DATABASE=cms_test

# MySQL/MariaDB Configuration
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=cms
MYSQL_USER=cms_user
MYSQL_PASSWORD=password
MYSQL_IMAGE_TAG=8.4.3

# Cache & Sessions
CACHE_URL=redis://root:root@redis:6379/1
SESSION_DEFAULTS=redis

# Email/SMTP
SMTP_URL=smtp://localhost:1025
EMAIL_HOST=mailpit
EMAIL_PORT=1025
EMAIL_TIMEOUT=30
EMAIL_USERNAME=
EMAIL_PASSWORD=
EMAIL_REPLY=hello@willowcms.app
EMAIL_NOREPLY=noreply@willowcms.app

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_USERNAME=root
REDIS_PASSWORD=root
REDIS_DATABASE=0
REDIS_URL=redis://root:root@redis:6379/0
REDIS_TEST_URL=redis://root:root@redis:6379/0
REDIS_TAG=7.2-alpine
REDIS_HEALTHCHECK_INTERVAL=10s
REDIS_HEALTHCHECK_TIMEOUT=3s
REDIS_HEALTHCHECK_RETRIES=5

# Queue Configuration
QUEUE_DEFAULT_URL=redis://root:root@redis:6379/0
QUEUE_TEST_URL=redis://root:root@redis:6379/0
QUEUE_CONFIG_KEY=image_analysis

# RabbitMQ Configuration
RABBITMQ_IMAGE_TAG=3.13-management
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/

# =============================================================================
# DOCKER & COMPOSE CONFIGURATION
# =============================================================================
PROJECT_NAME=willow
NETWORK_NAME=willow_network

# Service Names (as defined in docker-compose.yml)
WILLOW_APP_SERVICE=willowcms
WILLOW_DB_SERVICE=mysql
WILLOW_REDIS_SERVICE=redis

# Port Mappings
WILLOW_HTTP_PORT=8080
WILLOW_HTTPS_PORT=8443
MYSQL_PORT=3310
PMA_HTTP_PORT=8082
REDIS_COMMANDER_HTTP_PORT=8084
MAILPIT_SMTP_PORT=1125
MAILPIT_HTTP_PORT=8025
JENKINS_HTTP_PORT=8081
JENKINS_AGENT_PORT=50000

# Docker Build Args
DOCKER_UID=1000
DOCKER_GID=1000

# Volume Configuration (named volumes for remote)
VOLUME_MODE=volume
VOLUME_DRIVER=local

# Host Mount Paths (for bind volumes)
WILLOW_CODE_DIR=/Volumes/1TB_DAVINCI/docker/willow/cakephp
WILLOW_STORAGE_DIR=/Volumes/1TB_DAVINCI/docker/willow/storage
WILLOW_DB_DIR=/Volumes/1TB_DAVINCI/docker/willow/data/mysql
WILLOW_NGINX_LOGS_DIR=/Volumes/1TB_DAVINCI/docker/willow/logs/nginx

# Image Tags
PHPMYADMIN_IMAGE_TAG=latest
MAILPIT_IMAGE_TAG=latest
REDIS_COMMANDER_IMAGE_TAG=latest

# PhpMyAdmin Configuration
PMA_HOST=mysql
PMA_USER=root
PMA_PASSWORD=rootpassword
UPLOAD_LIMIT=300M

# Mailpit Configuration
MP_MAX_MESSAGES=5000
MP_DATABASE=/data/mailpit.db
MP_SMTP_AUTH_ACCEPT_ANY=1
MP_SMTP_AUTH_ALLOW_INSECURE=1

# Jenkins Configuration
JAVA_OPTS=-Djenkins.install.runSetupWizard=false

# =============================================================================
# GIT & DEPLOYMENT CONFIGURATION
# =============================================================================
# Git Remote Selection (origin|garzarobm|matthewdeaves)
GIT_REMOTE_NAME=garzarobm
GIT_URL=https://github.com/garzarobm/willow.git
GIT_REF=main-clean

# Stack File Path (relative to repo root)
STACK_FILE_PATH=portainer-stacks/docker-compose.yml

# Auto-pull from Git (for Portainer stacks)
AUTO_PULL=true

# =============================================================================
# PORTAINER API CONFIGURATION
# =============================================================================
# Portainer Server URL
PORTAINER_URL=https://your-portainer-server.com

# Portainer Endpoint ID (usually 1 for local Docker, 2+ for remote)
PORTAINER_ENDPOINT_ID=1

# Path to file containing Portainer API token (NOT the token itself)
PORTAINER_API_TOKEN_FILE=.portainer-token

# TLS Verification for Portainer API
PORTAINER_TLS_VERIFY=true

# Stack Name (for Portainer deployments)
STACK_NAME=willow-cms

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
# Health Check URLs (comma-separated)
HEALTHCHECK_URLS=https://your-production-domain.com,https://phpmyadmin.your-domain.com

# Health Check Timeout
HEALTHCHECK_TIMEOUT=30

# Enable Database Health Checks
DB_HEALTHCHECK=true

# =============================================================================
# API KEYS & EXTERNAL SERVICES
# =============================================================================
# OpenAI API Key
OPENAI_API_KEY=

# YouTube API Key
YOUTUBE_API_KEY=

# Translation API Key
TRANSLATE_API_KEY=

# =============================================================================
# ADMIN CONFIGURATION
# =============================================================================
# Default Admin User
WILLOW_ADMIN_USERNAME=admin
WILLOW_ADMIN_PASSWORD=changeme
WILLOW_ADMIN_EMAIL=admin@willowcms.app

# =============================================================================
# LOGGING & BACKUP CONFIGURATION
# =============================================================================
# Log Directory
LOGS_DIR=./logs

# Backup Directory
BACKUP_DIR=./backups

# Backup Retention (days)
BACKUP_RETENTION=30

# Log Configuration
LOG_DEBUG_PATH=/var/www/html/logs
LOG_ERROR_PATH=/var/www/html/logs
LOG_QUERIES_PATH=/var/www/html/logs
LOG_ADMIN_ACTIONS_PATH=/var/www/html/logs
LOG_DEBUG_FILE=debug
LOG_ERROR_FILE=error
LOG_QUERIES_FILE=queries
LOG_ADMIN_ACTIONS_FILE=bulk_actions
LOG_DEBUG_LEVELS=notice,info,debug
LOG_ERROR_LEVELS=warning,error,critical,alert,emergency

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Experimental Tests
EXPERIMENTAL_TESTS=Off