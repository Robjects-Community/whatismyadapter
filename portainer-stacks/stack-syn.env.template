# ============================================================================
# WhatIsMyAdapter - Synology NAS Stack Environment Variables Template
# ============================================================================
# This template is specifically for Synology NAS deployments using docker-compose-syn.yml
#
# USAGE:
# 1. Copy this file to stack-syn.env
# 2. Fill in all required values (marked as CHANGE-ME)
# 3. Deploy via Portainer or docker compose
#
# SECURITY WARNING:
# - NEVER commit stack-syn.env to Git (it's in .gitignore)
# - Store passwords securely (use password manager)
# - Rotate credentials regularly
# ============================================================================

# ============================================================================
# CRITICAL SECURITY VARIABLES (REQUIRED - CHANGE ALL VALUES!)
# ============================================================================
SECURITY_SALT=CHANGE-ME-TO-A-SECURE-64-CHARACTER-RANDOM-STRING-GENERATED-WITH-OPENSSL
MYSQL_ROOT_PASSWORD=CHANGE-ME-TO-SECURE-PASSWORD
MYSQL_PASSWORD=CHANGE-ME-TO-SECURE-PASSWORD
REDIS_PASSWORD=CHANGE-ME-TO-SECURE-PASSWORD
WILLOW_ADMIN_PASSWORD=CHANGE-ME-TO-SECURE-PASSWORD
REDIS_COMMANDER_PASSWORD=CHANGE-ME-TO-SECURE-PASSWORD

# Generate secure passwords with:
# openssl rand -base64 32  # For SECURITY_SALT (32+ chars)
# openssl rand -base64 24  # For other passwords (24+ chars)

# ============================================================================
# SYNOLOGY NAS USER/GROUP PERMISSIONS
# ============================================================================
# Default Synology NAS user for whatismyadapter
# Change these if you created a different user
PUID=1034
PGID=100

# ============================================================================
# SYNOLOGY VOLUME PATHS (Host-Mounted Volumes)
# ============================================================================
# Base path on Synology NAS (default: /volume1/docker/whatismyadapter)
# Adjust /volume1 if your NAS uses a different volume name

# WillowCMS application and logs
WILLOWCMS_APP_PATH=/volume1/docker/whatismyadapter/app
WILLOWCMS_LOGS_PATH=/volume1/docker/whatismyadapter/logs
WILLOWCMS_TMP_PATH=/volume1/docker/whatismyadapter/tmp

# MySQL database storage
MYSQL_DATA_PATH=/volume1/docker/whatismyadapter/mysql

# Redis data persistence
REDIS_DATA_PATH=/volume1/docker/whatismyadapter/redis

# Mailpit email storage
MAILPIT_DATA_PATH=/volume1/docker/whatismyadapter/mailpit

# IMPORTANT: Ensure these directories exist and have correct ownership:
# sudo chown -R 1034:100 /volume1/docker/whatismyadapter
# sudo chmod -R 755 /volume1/docker/whatismyadapter

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
APP_NAME=WhatIsMyAdapter
APP_FULL_BASE_URL=https://whatismyadapter.yourdomain.com
DEBUG=false
APP_ENCODING=UTF-8
APP_DEFAULT_LOCALE=en_US
APP_DEFAULT_TIMEZONE=America/Chicago

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
MYSQL_DATABASE=whatismyadapter_db
MYSQL_USER=adapter_user
MYSQL_IMAGE_TAG=8.0
MYSQL_PORT=3310

# MySQL Performance Tuning (Synology NAS Optimized)
MYSQL_INNODB_LOG_FILE_SIZE=256M
MYSQL_INNODB_BUFFER_POOL_SIZE=512M
MYSQL_MAX_CONNECTIONS=100

# Database connection settings
DB_PORT=3306

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_TAG=7.2-alpine
REDIS_PORT=6379
REDIS_USERNAME=default

# Redis Health Check
REDIS_HEALTHCHECK_INTERVAL=10s
REDIS_HEALTHCHECK_TIMEOUT=3s
REDIS_HEALTHCHECK_RETRIES=5

# ============================================================================
# ADMIN USER CONFIGURATION
# ============================================================================
WILLOW_ADMIN_USERNAME=admin
WILLOW_ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# EMAIL CONFIGURATION (Mailpit for development)
# ============================================================================
EMAIL_HOST=mailpit-syn
EMAIL_PORT=1025
EMAIL_REPLY=hello@whatismyadapter.com
EMAIL_NOREPLY=noreply@whatismyadapter.com

# ============================================================================
# PHPMYADMIN CONFIGURATION
# ============================================================================
PHPMYADMIN_IMAGE_TAG=latest
PMA_HTTP_PORT=8082
PMA_USER=root
UPLOAD_LIMIT=300M

# ============================================================================
# MAILPIT CONFIGURATION
# ============================================================================
MAILPIT_IMAGE_TAG=latest
MAILPIT_SMTP_PORT=1125
MAILPIT_HTTP_PORT=8025
MP_MAX_MESSAGES=5000
MP_SMTP_AUTH_ACCEPT_ANY=1
MP_SMTP_AUTH_ALLOW_INSECURE=1

# ============================================================================
# REDIS COMMANDER CONFIGURATION
# ============================================================================
REDIS_COMMANDER_IMAGE_TAG=latest
REDIS_COMMANDER_HTTP_PORT=8084
REDIS_COMMANDER_USERNAME=admin

# ============================================================================
# PORT MAPPINGS (Synology NAS)
# ============================================================================
WILLOW_HTTP_PORT=8080

# ============================================================================
# DOCKER IMAGE CONFIGURATION
# ============================================================================
WILLOWCMS_IMAGE=whatismyadapter-syn:latest

# ============================================================================
# API KEYS (Optional - Leave empty if not using)
# ============================================================================
OPENAI_API_KEY=
YOUTUBE_API_KEY=
TRANSLATE_API_KEY=

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_DEBUG_PATH=/var/www/html/logs
LOG_ERROR_PATH=/var/www/html/logs
LOG_QUERIES_PATH=/var/www/html/logs
LOG_ADMIN_ACTIONS_PATH=/var/www/html/logs
LOG_DEBUG_FILE=debug
LOG_ERROR_FILE=error
LOG_QUERIES_FILE=queries
LOG_ADMIN_ACTIONS_FILE=bulk_actions
LOG_DEBUG_LEVELS=notice,info,debug
LOG_ERROR_LEVELS=warning,error,critical,alert,emergency

# ============================================================================
# FEATURE FLAGS
# ============================================================================
EXPERIMENTAL_TESTS=Off

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# After configuring this file:
#
# 1. Create required directories on Synology NAS:
#    mkdir -p /volume1/docker/whatismyadapter/{app,logs,tmp,mysql,redis,mailpit}
#
# 2. Set correct ownership:
#    chown -R 1034:100 /volume1/docker/whatismyadapter
#
# 3. Deploy via Portainer:
#    - Upload docker-compose-syn.yml
#    - Load this file as environment variables
#    - Deploy stack
#
# 4. Verify deployment:
#    - WillowCMS: http://your-nas-ip:8080
#    - phpMyAdmin: http://your-nas-ip:8082
#    - Mailpit: http://your-nas-ip:8025
#    - Redis Commander: http://your-nas-ip:8084
#
# ============================================================================
