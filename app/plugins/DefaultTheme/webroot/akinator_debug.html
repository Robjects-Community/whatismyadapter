<!DOCTYPE html>
<html>
<head>
    <title>Akinator Debug</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="/default_theme/js/quiz.js"></script>
    <meta name="csrf-token" content="test-token">
</head>
<body>
    <div class="container mt-5">
        <h1>Akinator Quiz Debug</h1>
        
        <div id="debug-log" class="alert alert-info">
            <h5>Debug Log:</h5>
            <div id="log-content"></div>
        </div>

        <div id="akinator-container" class="mt-4" style="display: none;">
            <div class="card">
                <div class="card-body">
                    <h4 id="akinator-question">Loading...</h4>
                    <div id="answer-options" class="mt-3"></div>
                </div>
            </div>
        </div>
        
        <div id="loading-state" style="display: none;">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    
    <script>
    function log(message) {
        const logContent = document.getElementById('log-content');
        const timestamp = new Date().toLocaleTimeString();
        logContent.innerHTML += `<p>[${timestamp}] ${message}</p>`;
        console.log(message);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        log('DOM loaded');
        
        // Check if quiz.js loaded properly
        if (typeof window.QuizModule !== 'undefined') {
            log('✓ QuizModule is loaded');
        } else {
            log('✗ QuizModule is NOT loaded');
            return;
        }
        
        if (typeof window.initializeAkinator === 'function') {
            log('✓ initializeAkinator function exists');
        } else {
            log('✗ initializeAkinator function does NOT exist');
            return;
        }
        
        // Try to initialize
        log('Attempting to initialize Akinator...');
        
        try {
            window.initializeAkinator().then(function() {
                log('✓ Akinator initialized successfully');
                document.getElementById('akinator-container').style.display = 'block';
            }).catch(function(error) {
                log('✗ Akinator initialization error: ' + error.message);
                console.error(error);
            });
        } catch(e) {
            log('✗ Exception calling initializeAkinator: ' + e.message);
            console.error(e);
        }
    });
    </script>
</body>
</html>